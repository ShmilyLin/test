<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>创建住宿卡</title>
        <link rel="stylesheet" href="../../libs/init.css">
        <link rel="stylesheet" href="../../components/ModalView/ModalView.css">
        <link rel="stylesheet" href="./CreateHotelCard.css">
        <script src="../../utils/string.js"></script>
        <script src="../../libs/vue.js"></script>
    </head>
    <body>
        <div id="app">
            <div class="header">
                <div class="header-title">创建住宿卡</div>
            </div>
            <div class="section">
                <div class="section-inputitem">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-name" 
                        :class="{ 'section-inputitem-placeholder-typing': inputName || name.length > 0 }">住宿地点的名称</div>
                    <div class="section-inputitem-input section-inputitem-input-name" 
                        :class="{ 'section-inputitem-typing': inputName }" 
                        contenteditable="plaintext-only" 
                        ref="section-inputitem-input-name" 
                        @focus="inputNameFocusEvent" 
                        @blur="inputNameBlurEvent($event)"></div>
                </div>
                <div class="section-inputitem">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-type" 
                        :class="{ 'section-inputitem-placeholder-typing': inputType || type.length > 0 }">住宿地点的类型</div>
                    <div class="section-inputitem-input section-inputitem-input-type" 
                        :class="{ 'section-inputitem-typing': inputType }">
                        <input type="text" 
                            v-model.trim="type"
                            @keydown.tab.stop.prevent="inputTypeTabKeyDownEvent($event)" 
                            @keyup.tab.stop.prevent 
                            @keydown.enter="inputTypeEnterKeyDownEvent($event)" 
                            @focus="inputTypeFocusEvent" 
                            @blur="inputTypeBlurEvent">
                    </div>
                    <div class="section-inputitem-input-list" v-if="inputType && type.length > 0 && typeList && typeList.length > 0">
                        <div class="section-inputitem-input-list-item" 
                            :class="{ 'section-inputitem-input-list-item-selected': typeItemIndex===typeIndex }" 
                            v-for="(typeItem, typeItemIndex) in typeList" 
                            :key="typeItem.id" 
                            @mouseenter="typeIndex=typeItemIndex" 
                            @mousedown="type=typeItem.content">{{typeItem.content}}</div>
                    </div>
                </div>
                <div class="section-lineItem"></div>
                <div class="section-inputitem section-inputitem-address">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-address" 
                        :class="{ 'section-inputitem-placeholder-typing-address': inputCountry || country.length > 0 }">所在国家</div>
                    <div class="section-inputitem-input section-inputitem-input-address" 
                        :class="{ 'section-inputitem-typing': inputCountry }">
                        <input type="text" 
                            v-model.trim="country"
                            @focus="inputCountryFocusEvent" 
                            @blur="inputCountryBlurEvent">
                    </div>
                </div>
                <div class="section-inputitem section-inputitem-address">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-address" 
                        :class="{ 'section-inputitem-placeholder-typing-address': inputProvince || province.length > 0 }">所在省</div>
                    <div class="section-inputitem-input section-inputitem-input-address" 
                        :class="{ 'section-inputitem-typing': inputProvince }">
                        <input type="text" 
                            v-model.trim="province"
                            @focus="inputProvinceFocusEvent" 
                            @blur="inputProvinceBlurEvent">
                    </div>
                </div>
                <div class="section-inputitem section-inputitem-address">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-address" 
                        :class="{ 'section-inputitem-placeholder-typing-address': inputCity || city.length > 0 }">所在城市</div>
                    <div class="section-inputitem-input section-inputitem-input-address" 
                        :class="{ 'section-inputitem-typing': inputCity }">
                        <input type="text" 
                            v-model.trim="city"
                            @focus="inputCityFocusEvent" 
                            @blur="inputCityBlurEvent">
                    </div>
                </div>
                <div class="section-inputitem section-inputitem-address">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-address" 
                        :class="{ 'section-inputitem-placeholder-typing-address': inputDistrict || district.length > 0 }">所在区/县</div>
                    <div class="section-inputitem-input section-inputitem-input-address" 
                        :class="{ 'section-inputitem-typing': inputDistrict }">
                        <input type="text" 
                            v-model.trim="district"
                            @focus="inputDistrictFocusEvent" 
                            @blur="inputDistrictBlurEvent">
                    </div>
                </div>
                <div class="section-inputitem section-inputitem-address">
                    <div class="section-inputitem-placeholder section-inputitem-placeholder-address" 
                        :class="{ 'section-inputitem-placeholder-typing-address': inputAddress || address.length > 0 }">详细地址</div>
                    <div class="section-inputitem-input section-inputitem-input-address" 
                        :class="{ 'section-inputitem-typing': inputAddress }" 
                        contenteditable="plaintext-only" 
                        ref="section-inputitem-input-address"
                        @focus="inputAddressFocusEvent" 
                        @blur="inputAddressBlurEvent($event)"></div>
                </div>
                <div class="section-lineItem"></div>
                <div class="section-roomsItem">
                    <div class="section-roomsItem-header">房型</div>
                    <ul class="section-roomsItem-list">
                        <li class="section-roomsItem-list-item" v-for="(roomItem, roomIndex) in rooms" :key="roomItem.id">
                            <div class="section-roomsItem-list-item-header">
                                <div class="section-roomsItem-list-item-header-left">
                                    <div class="section-roomsItem-list-item-header-delete" @click="roomItemDeleteButtonClickEvent(roomIndex)"></div>
                                    <div class="section-roomsItem-list-item-header-name" :class="{ 'section-roomsItem-list-item-header-name-input': roomItem.inputRoomType }">
                                        <input type="text" 
                                            placeholder="请输入房型" 
                                            v-model.trim="roomItem.roomType" 
                                            @focus="roomItem.inputRoomType=true" 
                                            @blur="roomItem.inputRoomType=false">
                                    </div>
                                </div>
                                <div :class="roomItem.isShow ? 'section-roomsItem-list-item-header-show' : 'section-roomsItem-list-item-header-hidden'" @click="roomItemShowDetailButtonClickEvent(roomIndex)"></div>
                            </div>
                            <div class="section-roomsItem-list-item-section" v-if="roomItem.isShow">
                                <div class="section-roomsItem-list-item-section-1">
                                    <div class="section-roomsItem-list-item-section-1-title">平米数:</div>
                                    <div class="section-roomsItem-list-item-section-1-input">
                                        <input type="text" v-model.trim="roomItem.squareMeter" placeholder="0" @blur="roomItemSquareMeterInputBlurEvent(roomIndex)">
                                    </div>
                                </div>
                                <div class="section-roomsItem-list-item-section-1">
                                    <div class="section-roomsItem-list-item-section-1-title">房间数量单位:</div>
                                    <div class="section-roomsItem-list-item-section-1-input">
                                        <input type="text" v-model.trim="roomItem.roomUnit" placeholder="间">
                                    </div>
                                </div>
                                <div class="section-roomsItem-list-item-section-1">
                                    <div class="section-roomsItem-list-item-section-1-title">房间价格单位:</div>
                                    <div class="section-roomsItem-list-item-section-1-input">
                                        <input type="text" v-model.trim="roomItem.priceUnit" placeholder="人民币">
                                    </div>
                                </div>
                                <!-- <div class="section-roomsItem-list-item-section-2">
                                    <div class="section-roomsItem-list-item-section-2-title">房间价格:</div>
                                    <div class="section-roomsItem-list-item-section-2-right">
                                        <div class="section-roomsItem-list-item-section-2-right-unit">
                                            <div class="section-roomsItem-list-item-section-2-right-unit-title">价格单位</div>
                                            <div class="section-roomsItem-list-item-section-2-right-unit-input">
                                                <input type="text" v-model.trim="roomItem.priceUnit" placeholder="人民币">
                                            </div>
                                        </div>
                                        <div class="section-roomsItem-list-item-section-2-right-price">
                                            <div class="section-roomsItem-list-item-section-2-right-price-item">
                                                <div class="section-roomsItem-list-item-section-2-right-price-item-title">现价</div>
                                                <div class="section-roomsItem-list-item-section-2-right-price-item-input">
                                                    <input type="text" v-model.trim="roomItem.price">
                                                </div>
                                            </div>
                                            <div class="section-roomsItem-list-item-section-2-right-price-item">
                                                <div class="section-roomsItem-list-item-section-2-right-price-item-title">原价</div>
                                                <div class="section-roomsItem-list-item-section-2-right-price-item-input">
                                                    <input type="text" v-model.trim="roomItem.originalPrice">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                                <div class="section-roomsItem-list-item-section-3">
                                    <div class="section-roomsItem-list-item-section-3-title">可住人数:</div>
                                    <div class="section-roomsItem-list-item-section-3-right">
                                        <div class="section-roomsItem-list-item-section-3-right-number">
                                            <div class="section-roomsItem-list-item-section-3-right-number-item">
                                                <div class="section-roomsItem-list-item-section-3-right-number-item-title">成年人</div>
                                                <div class="section-roomsItem-list-item-section-3-right-number-item-input">
                                                    <input type="text" v-model.trim="roomItem.numberOfPeopleAvailable.adult" placeholder="1" @blur="roomItemNumOfAdultInputBlurEvent(roomIndex)">
                                                </div>
                                            </div>
                                            <div class="section-roomsItem-list-item-section-3-right-number-item">
                                                <div class="section-roomsItem-list-item-section-3-right-number-item-title">儿童</div>
                                                <div class="section-roomsItem-list-item-section-3-right-number-item-input">
                                                    <input type="text" v-model.trim="roomItem.numberOfPeopleAvailable.child" placeholder="0" @blur="roomItemNumOfChildInputBlurEvent(roomIndex)">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="section-roomsItem-list-item-section-3-right-checkbox" @click="roomItem.numberOfPeopleAvailable.canExtraBed=!roomItem.numberOfPeopleAvailable.canExtraBed">
                                            <div :class="roomItem.numberOfPeopleAvailable.canExtraBed ? 'section-roomsItem-list-item-section-3-right-checkbox-checked' : 'section-roomsItem-list-item-section-3-right-checkbox-none'"></div>
                                            <div class="section-roomsItem-list-item-section-3-right-checkbox-desc">是否可以加床</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="section-roomsItem-list-item-section-1">
                                    <div class="section-roomsItem-list-item-section-1-title">窗户:</div>
                                    <div class="section-roomsItem-list-item-section-1-input">
                                        <input type="text" v-model.trim="roomItem.windowTyps">
                                    </div>
                                </div>
                                <div class="section-roomsItem-list-item-section-3">
                                    <div class="section-roomsItem-list-item-section-3-title">其他设置:</div>
                                    <div class="section-roomsItem-list-item-section-3-right">
                                        <div class="section-roomsItem-list-item-section-3-right-input">
                                            <div class="section-roomsItem-list-item-section-3-right-input-title">免费提供早餐数量</div>
                                            <div class="section-roomsItem-list-item-section-3-right-input-input">
                                                <input type="text" v-model.trim="roomItem.numberOfBreakfast" placeholder="0" @blur="roomItemNumberOfBreakfastInputBlurEvent(roomIndex)">
                                            </div>
                                        </div>
                                        <div class="section-roomsItem-list-item-section-3-right-checkbox" @click="roomItem.nonsmoking=!roomItem.nonsmoking">
                                            <div :class="roomItem.nonsmoking ? 'section-roomsItem-list-item-section-3-right-checkbox-checked' : 'section-roomsItem-list-item-section-3-right-checkbox-none'"></div>
                                            <div class="section-roomsItem-list-item-section-3-right-checkbox-desc">禁烟</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="section-roomsItem-list-item-section-4">
                                    <div class="section-roomsItem-list-item-section-4-title">床型说明:</div>
                                    <div class="section-roomsItem-list-item-section-4-right" 
                                        contenteditable="plaintext-only" 
                                        ref="section-roomsItem-list-item-section-4-right-bedtype"
                                        @blur="inputBedtypeBlurEvent($event, roomIndex)"></div>
                                </div>
                                <div class="section-roomsItem-list-item-section-4">
                                    <div class="section-roomsItem-list-item-section-4-title">房间说明:</div>
                                    <div class="section-roomsItem-list-item-section-4-right" 
                                        contenteditable="plaintext-only" 
                                        ref="section-roomsItem-list-item-section-4-right-roomdesc"
                                        @blur="inputRoomdescBlurEvent($event, roomIndex)"></div>
                                </div>
                            </div>
                            <div class="section-roomsItem-list-item-line"></div>
                        </li>
                        <li class="section-roomsItem-list-item-add" @click="addRoomButtonClickEvent">
                            <div class="section-roomsItem-list-item-add-icon"></div>
                            <div class="section-roomsItem-list-item-add-text">添加一个房型</div>
                        </li>
                    </ul>
                </div>
                <div class="section-lineItem" style="margin-top: 10px;"></div>
                <div class="section-actions">
                    <div class="section-actions-confirm" @click="createAHotelCardButtonClickEvent">创建住宿卡</div>
                </div>
            </div>
            <modal-view v-if="isShowModal" :content="modalContent" @confirm-click="isShowModal=false"></modal-view>
        </div>

        <!-- ModalView -->
        <template id="modal-view">
            <div class="modal-view">
                <div class="modal-view-content">
                    <div class="modal-view-content-text">{{content}}</div>
                    <div class="modal-view-content-actions">
                        <div class="modal-view-content-actions-cancel" v-if="showCancel" @click="cancelButtonClickEvent">{{cancelText}}</div>
                        <div class="modal-view-content-actions-confirm" @click="confirmButtonClickEvent">{{confirmText}}</div>
                    </div>
                </div>
            </div>
        </template>
        <script src="../../components/ModalView/ModalView.js"></script>
        <script>
            require('./CreateHotelCard.js');
        </script>
    </body>
</html>
